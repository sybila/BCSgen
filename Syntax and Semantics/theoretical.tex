\documentclass[12pt]{article}
\usepackage[slovak]{babel}
\usepackage[utf8x]{inputenc}
\usepackage{kpfonts}
\usepackage{hyperref}
\usepackage{amsthm}
\newtheorem{mydef}{Definition}
\usepackage{mathabx}

\newcommand{\mysection}[1]{{\newpage\centering\Large\textbf{#1}\\}\normalsize\vspace{0.5cm}}
\newcommand{\mysmallsection}[1]{\vspace{0.5cm}\large\textbf{#1}\normalsize\vspace{0.5cm}}
\newcommand{\mydefinition}[1]{\vspace{0.5cm}\large\textbf{Definition} \normalsize{#1}\vspace{0.5cm}}

\begin{document}

\mysection{Extended BCSL syntax}

\mysmallsection{Extended structure agent definition:}

The key construct of a structure agent is \emph{partial composition} defined as a \textbf{set} of atomic agents which are considered to be relevant parts of the structure agent. We allow this set to be empty, in that case the meaning is a biological structure for which we do not know its composition.

\begin{mydef}
Let $\mathtt{T},\mathtt{T}'$ be structure agents. We define the \emph{structural equivalence of structure agents} by claiming $\mathtt{T}\equiv\mathtt{T}'$ iff there exist $\tau,\tau',\gamma_p,\gamma'_p,\mathtt{c}$ such that $\mathtt{T}=\tau(\gamma_p)::\mathtt{c},\mathtt{T}'=\tau'(\gamma'_p)::\mathtt{c}$, $\tau=\tau'$ and $\gamma_p,\gamma'_p$ are equal (multisets).
\end{mydef}

As a representative of a class of structurally equivalent structure agents we consider the agent $\mathtt{\tau}(\gamma_p)$ where the agents in $\gamma_p$ are lexicographically ordered by names.

\begin{mydef}
Let $\mathtt{T} = \tau(\gamma_p),\mathtt{T}' = \tau(\gamma'_p)$ be structure agents. We say $\mathtt{T}$ \emph{is compatible with} $\mathtt{T}'$, written $\mathtt{T} \lhd \mathtt{T}'$, iff $\forall \alpha' \in \gamma_p': \exists \alpha \in \gamma_p$ such that $\alpha \lhd \alpha'$. 
\end{mydef}

\mysmallsection{Extended complex agent definition:}

\begin{center}
{\small
\hspace*{-1 cm}\begin{tabular}{ ll ll }
 complex agent & $\mathtt{X}::=\gamma_f::\mathtt{c}~|~n\in{N}_{x}::\mathtt{c}$\\
 full composition & $\gamma_f ::= \mathtt{T}.\mathtt{T}~|~\mathtt{a}.\mathtt{a}~|~\mathtt{T}.\gamma_{f}~|~\mathtt{a}.\gamma_{f}$
\end{tabular}
}
\end{center}

Note the full composition if a list where order does not matter (but cannot be multiset for practical purposes).

\begin{mydef}
Let $\mathtt{X}=\gamma_f::\mathtt{c}$ for some full composition $\gamma_f$. We denote $\mathtt{T}\in \mathtt{X}$ (resp. $\mathtt{a}\in \mathtt{X}$) the fact that~$\mathtt{T}$ (resp. $\mathtt{a}$) is a structure agent (resp. atomic agent) included in~$\gamma_f$ (resp. in~$\gamma_p$). 
Moreover, we denote $\#\mathtt{T}[\mathtt{X}]$ (resp. $\#\mathtt{a}[\mathtt{X}]$) the number of occurrences of~$\mathtt{T}$ (resp. $\mathtt{a}$) in $\gamma_f$. 
\end{mydef}

\begin{mydef}
Let $\mathtt{X}=\gamma_f::\mathtt{c}$ for some full composition $\gamma_f$ and $\mathtt{X}'=\gamma'_f::\mathtt{c}$ for some full composition $\gamma'_f$. We denote $\mathtt{X} \in \mathtt{X}'$ the fact that each structure agent $\mathtt{T}$ (resp. atomic agent $\mathtt{a}$) $\in \gamma_f$ is included in~$\gamma'_f$, i.e. $\mathtt{X}$ is included in $\mathtt{X}'$.
\end{mydef}

\begin{mydef}
Let $\mathtt{X},\mathtt{X}'$ be complex agents. We define \emph{structural equivalence} of \emph{complex agents} by claiming $\mathtt{X}\equiv\mathtt{X}'$ iff either of the following conditions holds:
\begin{enumerate}
\item There exist a compartment $\mathtt{c}$ and $n,n'\in\mathcal{N}_x$ such that $\mathtt{X}=n::\mathtt{c},\mathtt{X}'=n'::\mathtt{c}$ and $n=n'$.
\item If both $\mathtt{X},\mathtt{X}'$ are specified as full compositions then the following four conditions must be satisfied:

\begin{itemize}
\item for each $\mathtt{T}\in\mathtt{X}$ there exists $\mathtt{T}'\in\mathtt{X}'$ such that $\mathtt{T}\equiv\mathtt{T}'$ and $\#\mathtt{T}[\mathtt{X}]=\#\mathtt{T}'[\mathtt{X}']$,
\item for each $\mathtt{T}'\in\mathtt{X}'$ there exists $\mathtt{T}\in\mathtt{X}$ such that $\mathtt{T}'\equiv\mathtt{T}$ and $\#\mathtt{T}'[\mathtt{X}']=\#\mathtt{T}[\mathtt{X}]$,
\item for each $\mathtt{a}\in\mathtt{X}$ there exists $\mathtt{a}'\in\mathtt{X}'$ such that $\mathtt{a}\equiv\mathtt{a}'$ and $\#\mathtt{a}[\mathtt{X}]=\#\mathtt{a}'[\mathtt{X}']$,
\item for each $\mathtt{a}'\in\mathtt{X}'$ there exists $\mathtt{a}\in\mathtt{X}$ such that $\mathtt{a}'\equiv\mathtt{a}$ and $\#\mathtt{a}'[\mathtt{X}']=\#\mathtt{a}[\mathtt{X}]$.
\end{itemize}

\end{enumerate}
\end{mydef}

\begin{mydef}
Let $\mathtt{X} = \gamma_f, \mathtt{X}' = \gamma'_f$ be complex agents. We say $\mathtt{X}$ \emph{is compatible with} $\mathtt{X}'$, written $\mathtt{X} \lhd \mathtt{X}'$, iff $\forall \alpha_1, \alpha_2, ..., \alpha_n \in \gamma_f $ and $\forall \alpha_1', \alpha_2', ..., \alpha_n' \in \gamma'_f$ : $\alpha_i \lhd \alpha_i'$. 
\end{mydef}

\mysmallsection{Extended grammar:}

With this definition, we are allowed to use `::' operator also between two complexes. For this reason, we can extend the syntax of the language as following:

\begin{center}
{\small
\hspace*{-1cm}\begin{tabular}{ ll ll }
 rules& $\mathtt{R} ::= \emptyset ~|~ r, \mathtt{R} $\\
 rule equation & $r ::= \Gamma ~\odot~\Gamma$\\
 direction & $\odot ::=~ \Rightarrow~|~\Leftrightarrow $\\
 rule expression & $\Gamma ::= \emptyset~|~\varrho~\epsilon::\mathtt{c}~|~ \varrho~\epsilon::\mathtt{c}~ +~\Gamma$\\
 stoichiometry & $\varrho ::= n \in \mathbb{N}^+$\\
 rule expression item & $\epsilon :: = \epsilon_1~|~\epsilon_1::\xi$\\
 rule agent & $\epsilon_1  ~::=~  \mathtt{a}~|~\mathtt{T}~|~\mathtt{X}~|~\mathtt{a}::\mathtt{T}$\\
 \textbf{nested complex} & $\xi  ~::=~  \mathtt{X}::\xi~|~\mathtt{X}$
\end{tabular}
}
\end{center}

\begin{mydef}
Let $\epsilon$ be a rule expression item that appears in a rule $r\in\mathtt{R}$. The \emph{rule expression} $\epsilon$ is \emph{well-defined} iff the following constrains are satisfied:

\begin{enumerate}
 \item If $\mathtt{a}::\tau(\gamma_p)$ is a subexpression of $\epsilon$ for some $\mathtt{a},\tau,\gamma_p$ then there must exist $\mathtt{a}' \in \gamma_p$ such that $\mathtt{a} \lhd \mathtt{a}'$.

\item If $\mathtt{T}::\mathtt{X}$ is a subexpression of $\epsilon$ for some $\mathtt{T},\mathtt{X}$ then there must exist $\mathtt{T}' \in \mathtt{X}$ such that $\mathtt{T} \lhd \mathtt{T}'$.

\item If $\mathtt{a}::\mathtt{X}$ is a subexpression of $\epsilon$ for some $\mathtt{a},\mathtt{X}$ then there must exist $\mathtt{a}' \in \mathtt{X}$ such that $\mathtt{a} \lhd \mathtt{a}'$.

\item If $\mathtt{X}'::\mathtt{X}$ is a subexpression of $\epsilon$ for some $\mathtt{X}',\mathtt{X}$ then there must exist $\mathtt{X}'' \in \mathtt{X}$ such that $\mathtt{X}' \lhd \mathtt{X}''$.

\end{enumerate}
 
If one of above subexpressions is inside a rule expression then it is called \emph{nested} rule agent else it is a \emph{basic} rule agent.
\end{mydef}

\begin{mydef}[Rule Flattening]
Let $(\Sigma_\tau,\Sigma_x)$ be a signature and $\mathtt{R}$ a set of rules. Every rule $r\in\mathtt{R}$ that includes some \emph{nested} rule agents $\epsilon$ can be reduced to a rule $r'\in\mathtt{R}$ where every rule agent $\epsilon$ is in \emph{basic} form. For every subexpression $\beta$ in every rule agent $\epsilon$ in $r$, the reduction is done recursively by replacing $\beta$ with $\beta'$ in the following way:
\begin{enumerate}
\item If $\beta=\mathtt{a}::\mathtt{T}$ where $\mathtt{T}=\tau(\gamma_p)$ for some $\tau,\gamma_p$ then there must exist $\mathtt{a}'\in\gamma_p$ such that $\mathtt{a}\lhd\mathtt{a}'$. Then we set $\beta'={\tau}(\gamma'_p)$ where $\gamma'_p$ is constructed from $\gamma_p$ by replacing $\mathtt{a}'\in\gamma_p$ with $\mathtt{a}$.
\item If $\beta=\mathtt{T}::\mathtt{X}$ where $\mathtt{X}=\gamma_f$ then there must exist $\mathtt{T}'\in\gamma_f$ such that $\mathtt{T}\lhd\mathtt{T}'$. Then we set $\beta'=\gamma'_f$ where $\gamma'_f$ is constructed from $\gamma_f$ by replacing $\mathtt{T}'\in\gamma_f$ with $\mathtt{T}$. 
\item If $\beta=\mathtt{a}::\mathtt{X}$ where $\mathtt{X}=\gamma_f$ then there must exist $\mathtt{a}'\in\gamma_f$ such that $\mathtt{a}\lhd\mathtt{a}'$. Then we set $\beta'=\gamma'_f$ where $\gamma'_f$ is constructed from $\gamma_f$ by replacing $\mathtt{a}'\in\gamma_f$ with $\mathtt{a}$. 
\item If $\beta=\mathtt{X}'::\mathtt{X}$ where $\mathtt{X}=\gamma_f$ and $\mathtt{X}'= \gamma'_f$ then for every $\mathtt{T} \in \gamma_f$ (resp. $\mathtt{a} \in \gamma_f$) there must exist $\mathtt{T}' \in \gamma'_f$ (resp. $\mathtt{a}' \in \gamma'_f$) such that $\mathtt{T} \lhd \mathtt{T}'$ (resp. $\mathtt{a} \lhd \mathtt{a}'$). Then we set $\beta'=\gamma_{f'}$ where $\gamma_{f'}$ is constructed from $\gamma_f$ by replacing all $\mathtt{T} \in \gamma_f$ (resp. $\mathtt{a} \in \gamma_f$) with appropriate $\mathtt{T}' \in \gamma'_f$  (resp. $\mathtt{a}' \in \gamma'_f$).
\end{enumerate} 
\end{mydef}


\noindent 
\framebox{
\begin{minipage}{1.05\textwidth}
The extended syntax with variables is the following: 

\begin{center}
{\small
\hspace*{-1cm}\begin{tabular}{ l l }
 rules& $\mathtt{R} ::= r, \mathtt{R} ~|~ r $\\
 rule equation & $r ::= \zeta ~|~ \zeta~;~\upsilon$\\
 rule sides & $\zeta ::= \Gamma~\odot~\Gamma ~|~ \Gamma~\odot ~|~ \odot~\Gamma$\\
 direction & $\odot ::=~ \Rightarrow~|~\Leftrightarrow $\\
 rule expression & $\Gamma ::= \varrho~\epsilon::\mathtt{c}~ +~\Gamma ~|~ \varrho~\epsilon::\mathtt{c}$\\
 stoichiometry & $\varrho ::= n \in \mathbb{N}^+$\\
 rule expression item & $\epsilon :: = \epsilon_1~|~\epsilon_2~|~\epsilon_1::\xi~|~\epsilon_2::\xi'~|~\xi'$\\
 extended rule agent & $\epsilon_1  ~::=~  ?\nu_1~|~?\nu_2~|~?\nu_3~|~\mathtt{a}::~?\nu_2~|~?\nu_1::\mathtt{T}$\\
 extended nested complex & $\xi' ~::=~ \mathtt{X}::\xi'~|~?\nu_3::\xi~|~?\nu_3~|~\xi$\\
 rule agent & $\epsilon_2  ~::=~  \mathtt{a}~|~\mathtt{T}~|~\mathtt{X}~|~\mathtt{a}::\mathtt{T}$\\
 nested complex & $\xi  ~::=~  \mathtt{X}::\xi~|~\mathtt{X}$\\
 variable & $\upsilon ::=~?\nu_1=\{\phi_1\}~|~?\nu_2=\{\phi_2\}~|~?\nu_3=\{\phi_3\}$\\
 atomic variable value & $\phi_1 ::= \mathtt{a},~\phi_1~|~\mathtt{a}$\\
 structure variable value & $\phi_2 ::= \mathtt{T},~\phi_2~|~\mathtt{T}$\\
 complex variable value & $\phi_3 ::= \mathtt{X},~\phi_3~|~\mathtt{X}$\\
\end{tabular}
}
\end{center}
\end{minipage}
}

\vspace{0.5cm}
If a variable is used, then it has to be involved in both sides of the rule (if they exist) and also in `; $\upsilon$' part.

\mysection{Border between human-readable\\ and executable part of BCSL}

The main difference between these two parts of BCSL is that the executable part can have operational semantics while human-readable cannot. For operational semantics there must be clear relations between both sides of a rule. This can't be achieved in human-readable part because it represents abstract chemical reactions. 

The executable rule can be in one of three reaction types:

\begin{itemize}
\item state change
	\begin{itemize}	
		\item one agent is changing its state (or states)
		\item number of reactants on both sides of the rule cannot change
	\end{itemize}
\item complex formation/dissociation 
	\begin{itemize}
		\item the result of the rule must be creation of one complex (or dissociation of one complex)
		\item number of structure agents on both sides must be equal
	\end{itemize} 
\item degradation/translation 
	\begin{itemize}
		\item similar to complex formation/dissociation -- difference is empty rule side instead of a complex
		\item only object agents can be translated
		\item degradation can be specified also for classes
	\end{itemize} 
\end{itemize}

\noindent 
\framebox{
\begin{minipage}{1.05\textwidth}
\textbf{To determine whether a rule is executable, it has to meet these conditions:}

\begin{enumerate}
\item the rule has to be in \textbf{flattened form} - it means each agent involved in the rule is in basic form, i.e. it is atomic, structure or complex agent (the operator `::' can be used only in sense of compartmentalisation)
\item the number of interacting molecules must be \textbf{fixed} ($\#(LHS)~=~\#(RHS)$). This includes all full and partial composition appearing on a rule side. Exceptions:
	\begin{enumerate}
		\item translation/degradation - one of the rule sides must be empty
		\item (de)complexation - number of new agents is different BUT number of all structure (resp. atomic) agents must be fixed
	\end{enumerate}
\item according to the reaction types of rules, the rule must be \textbf{unary operation} - only one agent can change in one step
\item all complexes must be \textbf{expanded} according to its specification
\end{enumerate}
If at least one of the conditions is not satisfied, then the rule is only in human-readable form.
\end{minipage}
}

\vspace*{1cm}
Then, if a human-readable rule is defined, exact mapping to executable rule(s) must be specified. The following steps are applied:

\begin{enumerate}
\item flattering can be resolved \textbf{automatically} - each rule expression item can be reduced to flattered form
\item if number is not \textbf{fixed}, then do following until it is not fixed (user's specification):
	\begin{enumerate}
		\item some of the agents put to \textit{MODIFIERS} field or
		\item remove some of the agents 
		\item (advanced: or each item could have a tag$^1$ which connects items from both sides and expresses exact rule behaviour)
	\end{enumerate}
\item if more than one operations is applied in the rule (combination of more reaction types or its multiplication), then the rule must be \textbf{expanded into more rules} (user's specification):
	\begin{enumerate}
		\item then, each created rule represents unary operation
		\item i.e., one human-readable rule triggers more executable rules
		\item note \textit{state change} reaction type can include change of more states at once
	\end{enumerate}
\item complexes can be expanded \textbf{automatically}
\end{enumerate}

\mysmallsection{Examples:}
\begin{itemize}
\item $S\{u\}::KaiC::KaiC2::cyt \Leftrightarrow S\{p\}::KaiC::KaiC2::cyt$
	\begin{itemize}
		\item An KaiC protein involved in KaiC2 dimer can change its phosphorylation state on serine residue
		\item \textbf{human-readable} rule, because:
			\begin{itemize}
				\item rule expression item are \textbf{not} in flattered form
				\item complexes are \textbf{not} expanded
			\end{itemize}
		\item both deficiencies can be fixed automatically
		\item resulting rule:\\
	$KaiC(S\{u\}).KaiC::cyt \Leftrightarrow KaiC(S\{p\}).KaiC::cyt$
	\end{itemize}
\item $FRS(T\{p\})::cyt + GS(T\{u\})::cyt \Leftrightarrow FRS(T\{p\}).GS(T\{u\})::cyt$
	\begin{itemize}
		\item threonine phosphorylated FRS enzyme and threonine unphosphorylated GS enzyme forms a complex
		\item \textbf{executable} rule, all conditions are satisfied
	\end{itemize}
\item $ps2(oec\{3+\}|yz\{+\})::tlm \Leftrightarrow ps2(oec\{4+\}|yz\{n\})::tlm$
	\begin{itemize}
		\item oxidation of S3-state of the oxygen-evolving complex OEC\{3+\} by Yz\{+\} in PSII RC
		\item it is allowed to change more states in one structure (complex) agent at once (it is considered as \textbf{one} change of ps2)
		\item \textbf{executable} rule, all conditions are satisfied
	\end{itemize}
	\newpage
\item {\small $pq\{n\}::tlm + 2 h\{+\}::tlm + bhc\{2-\}::cytb6f::tlm \\ \hspace*{1.9cm} \Leftrightarrow pqh2::tlm + bhc\{n\}::cytb6f::tlm$}
	\begin{itemize}
		\item \textbf{human-readable} rule, because:
			\begin{itemize}
				\item there are more operations happening at once
				\item uncertain $pqh2$ agent - might be complex, but it cannot be constructed from atomic agents
				\item (actually not even human-readable...)
			\end{itemize}
		\item possible \textbf{solution} in old BCS definition:
			\begin{itemize}
				\item there must be defined structure agent $pqh2(pq|h1|h2)$ where $h1$ and $h2$ can have $+$ or $n$ state and $pq$ can be omitted since it does not change its state during the rule
				\item expand the rule to following two executable rules:\vspace*{0.2cm}\\
				$> pqh2::tlm + cytb6f::tlm \Leftrightarrow pqh2.cytb6f::tlm $\vspace*{0.2cm}\\
				$> pqh2(h1\{+\}|h2\{+\}).cytb6f(bhc\{2-\})::tlm \\ \hspace*{.9cm} \Leftrightarrow pqh2(h1\{n\}|h2\{n\}).cytb6f(bhc\{n\})::tlm$
			\end{itemize}
		\item possible \textbf{solution} in \textbf{new} BCS definition:
			\begin{itemize}
			    \item there must be defined complex agent $pqh2 = pq.h.h$
				\item expand the rule to following two executable rules:\vspace*{0.2cm}\\
				$> pq::tlm + 2 h::tlm \Leftrightarrow pq.h.h::tlm $\vspace*{0.2cm}\\
				$> pqh2::tlm + cytb6f::tml \Leftrightarrow pqh2.cytb6f::tml$\\
				$> pq\{n\}.h\{+\}.h\{+\}.cytb6f(bhc\{2-\})::tlm \\ \hspace*{.9cm} \Leftrightarrow pq\{n\}.h\{n\}.h\{n\}.cytb6f(bhc\{n\})::tlm$
			\end{itemize}
	\end{itemize}
\end{itemize}

\newpage

\mysection{Matching and Replacement}

Partial composition has only partial application, i.e. we apply only one random (?), but meaningful change. On the other hand, full composition has full application, i.e. we apply all possible changes with respect to ordering of the composition. 

Let $\alpha$ be an agent and $\Gamma_s,~\Gamma_l,~\Gamma_r$ be given solution, left-hand-side and right-hand-side of a rule, respectively.

\begin{mydef}
For a given solution $\Gamma_s$ we consider all possible forms for each occurred complex agent as variations without replacement, i.e. we construct set of solutions $\{\Gamma_s\}$ where order for complex agents does matter. However, we do not change order of agents in the solution.
\end{mydef}

\begin{mydef}
Let $l_1$ and $l_2$ be lists. We define difference between two multisets $l~=~l_1~-~l_2$ as $[ x~|~x~\in~l_1~\wedge~x~\not\in~l_2 ]$.
\end{mydef}

\begin{mydef}
With assumption all rules of form $\Gamma_l\Rightarrow\Gamma_r$ are well-formed, we define \textbf{Matching} as function $\{\Gamma_s\}~\bigtimes~\Gamma_l~\rightarrow~\{\Gamma_s\}^{\lhd}$ where $\{\Gamma_s\}^{\lhd}~\subseteq~\{\Gamma_s\}$ such that $\forall \Gamma_s \in \{\Gamma_s\}^{\lhd} : \forall \alpha_1, \alpha_2, ..., \alpha_n \in \Gamma_s $ and $\forall \beta_1, \beta_2, ..., \beta_n \in \Gamma_l : \alpha_i \lhd \beta_i$ where $\alpha$, $\beta$ are atomic, structure or complex agents.
\end{mydef}

\begin{mydef}
\textbf{Replacement} is a function $\{\Gamma_s\}^{\lhd}~\times~\Gamma_r~\rightarrow~\{\Gamma_s[\Gamma_r]\}$. Five replacement categories can be distinguished:

\begin{enumerate}
\item \textit{state change}:

\begin{itemize}
\item $ \mathtt{a}_s\{p\}[\mathtt{a}_r\{t\}] = \mathtt{a}_s\{t\} $

where $ \mathtt{a}_s = \mathtt{a}_l = \mathtt{a}_r $.

\item $ \mathtt{T}_s[\mathtt{T}_r] = \mathtt{T}_s: \forall \mathtt{a}_r\{t\} \in \gamma_p^{r} : \mathtt{a}_s\{p\} \in \gamma_p^{s} : \mathtt{a}_s\{p\}[\mathtt{a}_r\{t\}] $

where $\mathtt{T}_s = \tau_s(\gamma_p^{s})$, $\mathtt{T}_l = \tau_l(\gamma_p^{l})$, $\mathtt{T}_r = \tau_r(\gamma_p^{r})$ and $\tau_s = \tau_l = \tau_r$ and $\mathtt{a}_s = \mathtt{a}_r$

\item $ \mathtt{X}_s[\mathtt{X}_r] = \mathtt{X}_s: \forall \alpha_1, \alpha_2, ..., \alpha_n \in \mathtt{X}_s $ and $\forall \beta_1, \beta_2, ..., \beta_n \in \mathtt{X}_r : \alpha_i[\beta_i]$
		
where $\mathtt{X}_s = \gamma_f^{s}$ and $\mathtt{X}_r = \gamma_f^{r}$.

\end{itemize}

\item \textit{complex formation}:
\begin{center}$\Gamma_s[\Gamma_r] = \gamma_f = ( \mathtt{X}~|~ \forall \mathtt{X} \in \Gamma_s + [ \mathtt{T}~|~\forall\mathtt{T} \in \Gamma_s] + [ \mathtt{a}~|~\forall \mathtt{a} \in \Gamma_s ] )$
\end{center}

\item \textit{complex dissociation}:

\begin{center}
$ \gamma_f(\Gamma_s)[\Gamma_r] = \Gamma_s = \forall \mathtt{p} \in \Gamma_r :$

 $[ \gamma_f~|~ \forall \alpha_i, ..., \alpha_j \in \mathtt{p} : \gamma_f~=~[\alpha_i, ..., \alpha_j]] $
 
 $+$ 
 
 $[ \alpha~|~\alpha~\in~\mathtt{p} ] $
\end{center}

\item \textit{degradation}
\begin{center}
$ \Gamma_s[\emptyset] = \emptyset $
\end{center}

\item \textit{translation}
\begin{center}
$ \emptyset[\Gamma_r] = \Gamma_r $
\end{center}

\end{enumerate}
\end{mydef}

\end{document}